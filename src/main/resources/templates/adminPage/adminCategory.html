<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="/publicPage/adminPage/Header::html('商品管理')">
    <meta charset="UTF-8">
</head>
<!--<div th:replace="/publicPage/adminPage/Navigator::html"></div>-->
<body>

<div th:replace="/publicPage/adminPage/Navigator::html"></div>

    <div id="workPlace">
    <h1 class="label label-warning">商品管理</h1>
    <br>
    
    <br>
    <div class="listDataTableDiv">

            <table class="table table-striped table-bordered table-hover table-condensed">
                <thead>
                <tr class="success">
                    <!-- <th>ID</th> -->
                    <th>商品类别</th>
                    <th>图片</th>
                    <th>商品</th>
                    <th>类别属性</th>
                    <th>类别编辑</th>
                    <th>类别删除</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="item in items">
                    <!-- <td>{{ item.id }}</td> -->
                    <!--    忘记 v-bind 绑定了 ，不要用缩写 ":"  很恶心，根本看不见-->
                    <td>{{ item.name }}</td>
                    <td><img height="40px"  v-bind:src=" 'img/category/' + item.id + '.jpg' "></td>
                    <td><a v-bind:href=" 'admin_commodity?cid=' +item.id "><span class="glyphicon glyphicon-shopping-cart"></span></a></td>
                    <td><a v-bind:href=" 'admin_attribute?cid=' + item.id "><span class="glyphicon  glyphicon-tags "></span></a></td>
                    <td><a v-bind:href=" 'edit_category?id=' +item.id "><span class="glyphicon glyphicon-pencil "></span></a></td>
                    <td><a href="#nowhere" @click="deleteBean(item.id) "><span class="glyphicon glyphicon-trash"></span></a></td>
                </tr>
                </tbody>
            </table>
    </div>
<!--
<div th:replace="/publicPage/adminPage/Footer::html"></div>
-->

<script>
    var url = "categories";
    var modelData = {
        items:[]
    };
    var vue = new Vue({
        //  忘记加 # 导致没有挂载成功
        el: '#workPlace',
        data:modelData,
        mounted:function(){
            // vue.list();     // error in mounted: undefined is not an object
            this.list();       //   使用 this 才能成功挂载
        },
        methods:{
            list:function(){
                axios
                .get(url)                 //  this.uri +"?start="+start
                .then(function(response){
                    vue.items = response.data;    //  this.items = response.data; 无法显示所有数据  这个this，作用域范围是是 then函数里，而非 Vue的实例对象
                    console.log(response);
                }).catch(function (error) {
                    console.log(error.message);
                });
            }
        
        }
    });
</script>
</body>
</html>